<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="assets/style.css">
    <title>Processi e sviluppo software</title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="assets/autocomplete.js"></script>
    <script>
        let currentArticle;
        let articlesNames;
        const getArticles = () => {
            axios.get("/api/articlesNames")
                .then((res) => {
                    articlesNames = res.data;
                    autocomplete(document.getElementById("autocompleteInput"), res.data.map((x) => ({ key: x.id, text: x.title })));
                })
                .catch((err) => {
                    console.log(err);
                })
        }

        const pullArticle = () => {
            const autocompleteInput = document.getElementById("autocompleteInputId").value;
            axios.get("/api/article/" + autocompleteInput)
                .then((res) => {
                    currentArticle = res.data;
                    document.getElementById("articleId").textContent = currentArticle.id;
                    document.getElementById("articleTitle").textContent = currentArticle.title;
                    document.getElementById("articleText").textContent = currentArticle.description;
                    document.getElementById("articleAuthors").textContent = currentArticle.author;
                })
                .catch((err) => {
                    console.log(err);
                })
        }

    </script>
</head>

<body>
    <div style="display: flex; flex-direction: row;">
        <div style="width: 20%">
            <h2>Scientific articles search engine</h2>

            <p>Article name:</p>
            <div class="autocomplete" style="width:300px;">
                <input id="autocompleteInputId" type="hidden" name="autocompleteInputId">
                <input id="autocompleteInput" type="text" name="autocompleteInput" placeholder="Article name">
            </div>
            <input type="submit" onClick="return pullArticle()">
        </div>
        <div style="width: 80%; padding: 32px">

            <h6 style="padding: 8px" id="articleId"></h6>
            <h1 style="padding: 8px" id="articleTitle"></h1>
            <h3 style="padding: 8px" id="articleText"></h3>
            <h2 style="padding: 8px" id="articleAuthors"></h2>
        </div>
    </div>



    <script>

        getArticles();
    </script>
</body>

</html>